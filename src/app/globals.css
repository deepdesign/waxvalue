@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --global-colour: #3b82f6; /* Global primary colour - change here to update throughout the app */
    --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --gradient-primary-hover: linear-gradient(135deg, #5568d3 0%, #5e3c7d 100%);
    --gradient-primary-active: linear-gradient(135deg, #4a5bbd 0%, #4d3265 100%);
    
    /* Enhanced gradient variables with better performance */
    --gradient-primary-animated: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #667eea 100%);
    --gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
    --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    --gradient-error: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  }
  
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200;
  }
  
  /* Smooth transitions for theme changes */
  * {
    @apply transition-colors duration-200;
  }
  
  /* NO I-BEAM CURSOR ANYWHERE - default cursor for most elements */
  * {
    cursor: default;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
  
  /* Interactive elements should have pointer cursor */
  button, a, [role="button"], input[type="checkbox"], input[type="radio"], label {
    cursor: pointer;
  }
  
  /* Only show text cursor in actual text input fields */
  input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="url"], textarea, [contenteditable="true"] {
    cursor: text !important;
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
  }
  
  /* Allow text selection on content (but keep default cursor, not I-beam) */
  p, td, li, pre, code, .allow-select {
    user-select: text;
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    /* Improve touch targets */
    button, a, [role="button"] {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Better touch scrolling */
    .overflow-y-auto {
      -webkit-overflow-scrolling: touch;
    }
    
    /* Prevent zoom on input focus */
    input, textarea, select {
      font-size: 16px;
    }
    
    /* Better touch feedback */
    button:active, a:active, [role="button"]:active {
      transform: scale(0.98);
    }
  }
  
  /* Buttons should show pointer cursor */
  button, [role="button"], a {
    cursor: pointer !important;
  }
  
  /* Ensure proper contrast in dark mode */
  input, textarea, select {
    @apply bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100;
  }
  
  /* Focus states for accessibility */
  input:focus, textarea:focus, select:focus {
    @apply ring-2 ring-primary-500 dark:ring-primary-400 border-primary-500 dark:border-primary-400;
  }

}

@layer components {
  /* Enhanced Gradient utility classes */
  .bg-gradient-primary {
    background: var(--gradient-primary);
    background-size: 200% 200%;
    animation: gradient-shift 4s ease infinite;
  }
  
  .bg-gradient-primary-hover:hover {
    background: var(--gradient-primary-hover);
    background-size: 200% 200%;
    animation: gradient-shift 3s ease infinite;
  }
  
  .bg-gradient-primary-active:active {
    background: var(--gradient-primary-active);
    background-size: 200% 200%;
    animation: gradient-shift 2s ease infinite;
  }
  
  /* Additional gradient variants */
  .bg-gradient-success {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    background-size: 200% 200%;
    animation: gradient-shift 4s ease infinite;
  }
  
  .bg-gradient-warning {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    background-size: 200% 200%;
    animation: gradient-shift 4s ease infinite;
  }
  
  .bg-gradient-error {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    background-size: 200% 200%;
    animation: gradient-shift 4s ease infinite;
  }
  
  /* Enhanced shimmer effect for loading states */
  .bg-shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  
  .bg-shimmer-dark {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(0, 0, 0, 0.1),
      transparent
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  
  /* Pulse gradient for interactive elements */
  .bg-gradient-pulse {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background-size: 200% 200%;
    animation: gradient-pulse 3s ease-in-out infinite;
  }
  
  /* Rainbow gradient for special effects */
  .bg-gradient-rainbow {
    background: linear-gradient(
      45deg,
      #ff0000,
      #ff7f00,
      #ffff00,
      #00ff00,
      #0000ff,
      #4b0082,
      #9400d3
    );
    background-size: 400% 400%;
    animation: rainbow-shift 4s ease infinite;
  }
  
  /* Optimized gradient animations with will-change for better performance */
  .bg-gradient-animated {
    will-change: background-position;
    transform: translateZ(0); /* Force hardware acceleration */
  }
  
  /* Subtle gradient overlays for depth */
  .gradient-overlay {
    position: relative;
  }
  
  .gradient-overlay::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      transparent 50%,
      rgba(0, 0, 0, 0.1) 100%
    );
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Enhanced button gradient effects */
  .btn-gradient-hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background-size: 200% 200%;
    transition: all 0.3s ease;
  }
  
  .btn-gradient-hover:hover {
    background-position: 100% 100%;
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
  }
  
  /* Glass morphism gradient */
  .bg-glass-gradient {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 100%
    );
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  
  /* Design System Components - Enhanced with modern Tailwind features */
  
  /* Card component - enhanced with colored shadows */
  .card-base {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6;
  }
  
  .card-elevated {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-lg shadow-gray-200/50 dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700 p-6 hover:shadow-xl hover:shadow-gray-200/60 dark:hover:shadow-gray-900/60 transition-shadow duration-300;
  }
  
  /* Input component - enhanced with modern focus states */
  .input-base {
    @apply block w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500/50 dark:focus:ring-primary-400/50 focus:border-primary-500 dark:focus:border-primary-400 focus:shadow-lg focus:shadow-primary-500/20 dark:focus:shadow-primary-400/20 transition-all duration-200;
  }
  
  /* Badge component - enhanced with colored shadows */
  .badge-base {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-primary {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-200 shadow-sm shadow-primary-200/50 dark:shadow-primary-900/30;
  }
  
  .badge-success {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 shadow-sm shadow-green-200/50 dark:shadow-green-900/30;
  }
  
  .badge-warning {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 shadow-sm shadow-yellow-200/50 dark:shadow-yellow-900/30;
  }
  
  /* Navigation link - consistent nav styling */
  .nav-link {
    @apply flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors select-none cursor-pointer;
  }
  
  .nav-link-active {
    @apply bg-primary-100 dark:bg-primary-900/50 text-primary-900 dark:text-primary-100;
  }
  
  .nav-link-inactive {
    @apply text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100;
  }
  
  /* Table styling - consistent table appearance */
  .table-base {
    @apply min-w-full divide-y divide-gray-200 dark:divide-gray-700;
  }
  
  .table-header {
    @apply bg-gray-50 dark:bg-gray-800;
  }
  
  .table-cell {
    @apply px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100;
  }
  
  /* Loading states - consistent loading appearance */
  .loading-spinner {
    @apply animate-spin rounded-full h-4 w-4 border-b-2 border-current;
  }
  
  .loading-spinner-lg {
    @apply animate-spin rounded-full h-6 w-6 border-b-2 border-current;
  }
  
  /* Modern Typography Enhancements */
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  
  .text-shadow-md {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .text-shadow-lg {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
  }
  
  .text-shadow-colored {
    text-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
  }
  
  /* Fancy underline styles */
  .underline-fancy {
    text-decoration: underline;
    text-decoration-style: wavy;
    text-decoration-color: #3b82f6;
    text-underline-offset: 4px;
  }
  
  .underline-gradient {
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    background-size: 100% 2px;
    background-repeat: no-repeat;
    background-position: 0 100%;
    text-decoration: none;
  }
  
  /* Advanced underline styles */
  .underline-dotted {
    text-decoration: underline;
    text-decoration-style: dotted;
    text-decoration-color: #3b82f6;
    text-underline-offset: 2px;
  }
  
  .underline-double {
    text-decoration: underline;
    text-decoration-style: double;
    text-decoration-color: #3b82f6;
    text-underline-offset: 3px;
  }
  
  .underline-thick {
    text-decoration: underline;
    text-decoration-thickness: 3px;
    text-decoration-color: #3b82f6;
    text-underline-offset: 2px;
  }
  
  /* 3D Transform utilities */
  .transform-3d {
    transform-style: preserve-3d;
  }
  
  .hover-tilt:hover {
    transform: perspective(1000px) rotateX(5deg) rotateY(5deg);
    transition: transform 0.3s ease;
  }
  
  .hover-flip:hover {
    transform: perspective(1000px) rotateY(180deg);
    transition: transform 0.6s ease;
  }
  
  /* Container Query Support */
  @container (min-width: 300px) {
    .container-responsive {
      @apply grid-cols-1;
    }
  }
  
  @container (min-width: 600px) {
    .container-responsive {
      @apply grid-cols-2;
    }
  }
  
  @container (min-width: 900px) {
    .container-responsive {
      @apply grid-cols-3;
    }
  }
  
  /* Advanced Scroll Snap Utilities */
  .scroll-snap-smooth {
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
  }
  
  .scroll-snap-item {
    scroll-snap-align: center;
    scroll-snap-stop: always;
  }
  
  /* Enhanced Focus States */
  .focus-ring-modern {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900;
  }
  
  .focus-ring-colored {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900 focus:shadow-lg focus:shadow-primary-500/20;
  }
  
  /* Enhanced Striped Background Animation */
  .bg-stripes {
    background-image: 
      linear-gradient(45deg, transparent 25%, rgba(255, 255, 255, 0.1) 25%),
      linear-gradient(-45deg, transparent 25%, rgba(255, 255, 255, 0.1) 25%);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    animation: stripes 1s linear infinite;
  }
  
  .bg-stripes-dark {
    background-image: 
      linear-gradient(45deg, transparent 25%, rgba(0, 0, 0, 0.1) 25%),
      linear-gradient(-45deg, transparent 25%, rgba(0, 0, 0, 0.1) 25%);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    animation: stripes 1s linear infinite;
  }
  
  @keyframes stripes {
    0% {
      background-position: 0 0, 10px 10px;
    }
    100% {
      background-position: 20px 20px, 30px 30px;
    }
  }
}

/* Fix table header vertical scrollbar issue - using maximum specificity */
div.table-container-fix,
.table-container-fix {
  overflow-x: auto !important;
  overflow-y: visible !important;
}

/* Even more specific selector */
.bg-white .table-container-fix,
.dark\:bg-gray-800 .table-container-fix {
  overflow-x: auto !important;
  overflow-y: visible !important;
}

/* Progress bar animation */
@keyframes progress {
  0% {
    width: 0%;
  }
  50% {
    width: 70%;
  }
  100% {
    width: 100%;
  }
}

/* Slide down animation for banner */
@keyframes slideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

/* Button hover scale animation */
.btn-hover-scale {
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.btn-hover-scale:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

.btn-hover-scale:active {
  transform: scale(0.98);
}

/* Audio Wave Loader Animation */
.loader-wave {
  display: flex;
  align-items: center;
  justify-content: center;
}

.wave-svg {
  height: 70px;
  width: 70px;
  fill: #3b82f6; /* primary-600 */
}

.dark .wave-svg {
  fill: #60a5fa; /* primary-400 */
}

.wave-line {
  animation: pulse-wave 1s infinite ease-in-out;
}

.wave-line-1 { animation-delay: 0.15s; }
.wave-line-2 { animation-delay: 0.30s; }
.wave-line-3 { animation-delay: 0.45s; }
.wave-line-4 { animation-delay: 0.60s; }
.wave-line-5 { animation-delay: 0.75s; }
.wave-line-6 { animation-delay: 0.90s; }
.wave-line-7 { animation-delay: 1.05s; }
.wave-line-8 { animation-delay: 1.20s; }
.wave-line-9 { animation-delay: 1.35s; }

@keyframes pulse-wave {
  0% {
    transform: scaleY(1);
    transform-origin: 50% 50%;
  }
  
  50% {
    transform: scaleY(0.7);
    transform-origin: 50% 50%;
  }
  
  100% {
    transform: scaleY(1);
    transform-origin: 50% 50%;
  }
}

/* Fade-out animation for applied items */
.fade-out-row {
  animation: fadeOutCollapse 300ms ease-out forwards;
}

/* Smooth row repositioning after apply - creates a slide effect */
tbody tr,
.card {
  transition: transform 200ms ease-in-out, opacity 200ms ease-in-out, background-color 150ms ease-in-out;
}

/* Custom checkbox styling for table */
input[type="checkbox"].table-checkbox {
  appearance: none;
  -webkit-appearance: none;
  width: 1rem;
  height: 1rem;
  border: 1px solid rgb(229 231 235); /* gray-200 */
  border-radius: 0.25rem;
  background-color: rgb(249 250 251); /* gray-50 - matches main site background */
  cursor: pointer;
  position: relative;
  transition: all 0.2s;
}

.dark input[type="checkbox"].table-checkbox {
  border-color: rgb(107 114 128); /* gray-500 - 2 shades lighter */
  background-color: rgb(55 65 81); /* gray-700 - 2 shades lighter */
}

input[type="checkbox"].table-checkbox:hover {
  border-color: rgb(156 163 175); /* gray-400 */
}

.dark input[type="checkbox"].table-checkbox:hover {
  border-color: rgb(156 163 175); /* gray-400 - lighter on hover */
}

input[type="checkbox"].table-checkbox:checked {
  background-color: rgb(37 99 235); /* primary-600 */
  border-color: rgb(37 99 235);
}

input[type="checkbox"].table-checkbox:checked::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -65%) rotate(45deg);
}

        @keyframes fadeOutCollapse {
          0% {
            opacity: 1;
            max-height: 200px;
            transform: scale(1);
          }
          
          50% {
            opacity: 0;
            transform: scale(0.98);
          }
          
          100% {
            opacity: 0;
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            margin-bottom: 0;
            border: 0;
            transform: scale(0.95);
          }
        }
        
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
        
        /* Tooltip constraints to prevent off-screen issues */
        .tooltip-container {
          position: relative;
          display: inline-block;
        }
        
        .tooltip-content {
          position: absolute;
          z-index: 9999 !important;
          max-width: 300px;
          word-wrap: break-word;
          overflow-wrap: break-word;
          white-space: normal;
          line-height: 1.4;
        }
        
        /* Ensure tooltips are always on top of everything */
        .tooltip-content * {
          z-index: 9999 !important;
        }
        
        /* Ensure tooltips don't go off screen */
        .tooltip-content[data-placement="top"] {
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          margin-bottom: 8px;
        }
        
        .tooltip-content[data-placement="bottom"] {
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          margin-top: 8px;
        }
        
        .tooltip-content[data-placement="left"] {
          right: 100%;
          top: 50%;
          transform: translateY(-50%);
          margin-right: 8px;
        }
        
        .tooltip-content[data-placement="right"] {
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          margin-left: 8px;
        }

/* Indeterminate progress animation */
@keyframes indeterminate {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}